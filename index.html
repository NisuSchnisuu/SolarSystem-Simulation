<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Sonnensystem-Simulation (6. Klasse) - Realistische Bahnen & Saturnschatten</title>
    
    <!-- Bibliotheken -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/DRACOLoader.js"></script>
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="loading-screen">
        <p id="loading-text">Laden...</p>
        <div id="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
    </div>

    <div id="container"></div>

    <div id="distance-label">0 Mio. km</div>

    <div id="camera-overlay">
        <div class="viewfinder-border">
            <div class="viewfinder-crosshair"></div>
            <div style="position: absolute; top: 10px; left: 10px; color: rgba(255,255,255,0.7); font-family: monospace; font-size: 12px;">REC â— [RAW]</div>
            <div style="position: absolute; bottom: 10px; right: 10px; color: rgba(255,255,255,0.7); font-family: monospace; font-size: 12px;">16mm</div>
        </div>

        <div id="camera-top-bar">
            <button id="open-gallery-btn" class="btn btn-secondary" style="position: relative;">
                ğŸ–¼ï¸ Galerie
                <span id="gallery-badge" class="badge-new" style="display: none;">0</span>
            </button>
            <button id="close-camera-btn" class="btn btn-danger">âŒ Beenden</button>
        </div>

        <div id="camera-controls">
            <div class="cam-slider-group">
                <label>ISO (Helligkeit)</label>
                <input type="range" id="cam-iso" min="0.1" max="5.0" step="0.1" value="1.0">
            </div>
            
            <button id="shutter-btn" title="Foto aufnehmen"></button>
            
            <div class="cam-slider-group">
                <label>ğŸ”­ Teleskop-Zoom</label>
                <input type="range" id="cam-zoom" min="0" max="100" step="0.5" value="30">
            </div>
        </div>
    </div>

    <div id="camera-flash"></div>

    <div id="gallery-overlay">
        <div id="gallery-header">
            <h2 style="margin:0; color: #e0b0ff;">Deep Space Aufnahmen</h2>
            <div style="display: flex; gap: 10px;">
                <button id="delete-all-btn" class="btn btn-secondary" style="border-color: #ff3300; color: #ff3300; width: auto; min-width: 120px;">
                    ğŸ—‘ï¸ Alle lÃ¶schen
                </button>
                <button id="close-gallery-btn" class="btn btn-secondary" style="width: auto;">Schliessen</button>
            </div>
        </div>
        <div id="gallery-grid">
            <p style="color: #666; width: 100%; text-align: center; grid-column: 1/-1;">Noch keine Fotos aufgenommen.</p>
        </div>
    </div>

    <div id="lightbox-overlay">
        <span id="lightbox-close">&times;</span>
        <img id="lightbox-img" src="">
    </div>

    <div id="ui-container">
        <button id="fullscreen-btn" title="Vollbild umschalten"></button>
        <button id="toggle-ui" class="btn btn-secondary" title="MenÃ¼ verbergen">âœ•</button>
        <button id="reload-btn" title="Simulation neu laden">
            <svg viewBox="0 0 24 24">
                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
            </svg>
        </button>
        <button id="camera-mode-btn" title="Fotomodus Ã¶ffnen">
            <svg viewBox="0 0 24 24">
                <path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
                <circle cx="12" cy="13" r="3"/>
            </svg>
        </button>

        <div id="ui-fixed-header">
            <div class="control-group" style="margin-top: 25px; margin-bottom: 0;"> <h3>Steuerung</h3>
                <div class="btn-group" style="margin-bottom: 15px;" id="play-group">
                    <button id="rewind-btn" class="btn btn-secondary" title="ZurÃ¼ckspulen"></button>
                    <button id="play-pause-btn" class="btn">Pause</button>
                </div>
                
                <div id="time-controls">
                    <label for="day-slider">Zeitsteuerung (1. Jahr): <span id="current-day-label" style="font-weight: bold; color: #ffc107;">0.0</span></label>
                    <input type="range" id="day-slider" min="0" max="365" value="0" step="0.1">
                    
                    <label for="speed-slider" style="margin-top: 5px;">Geschwindigkeit: <span id="speed-label"></span></label> <input type="range" id="speed-slider" min="0" max="100" value="10" step="1">
                </div>
                
                <label for="darkness-slider" style="margin-top: 5px;">Helligkeit (Nachtseite): <span id="darkness-label">0.04</span></label> <input type="range" id="darkness-slider" min="0" max="0.9" value="0.04" step="0.01">
                </div> 
        </div>
                
        <div id="ui-scrollable-content">
            
            <div class="control-group" id="controls-general-scrolling">
                <div id="comet-controls" style="display: none; margin-top: 15px; border-top: 1px dashed #444; padding-top: 10px;">
                    <button id="follow-comet-btn" class="btn btn-info btn-pulse" style="width: 100%; margin-bottom: 10px;">ğŸ”­ Komet verfolgen!</button>
                    <label class="checkbox-label" style="color: #00ffff;">
                        <input type="checkbox" id="comet-speed-checkbox">
                        Komet-Zeitraffer (3x)
                    </label>
                </div>

                <div id="rocket-controls" style="display: none; margin-top: 10px; border-top: 1px dashed #444; padding-top: 10px;">
                    <button id="launch-rocket-btn" class="btn btn-danger btn-pulse" style="width: 100%; background-color: #b700ff;">ğŸš€ Raketenstart verfÃ¼gbar!</button>
                    <div id="rocket-status" style="font-size: 12px; text-align: center; margin-top: 5px; color: #aaa;"></div>
                    <button id="rocket-dismiss-btn" class="btn btn-secondary" style="width: 100%; margin-top: 5px; font-size: 11px; padding: 4px;">âŒ Kein Interesse</button>
                    <button id="rocket-cam-btn" class="btn btn-warning" style="display: none; width: 100%; margin-top: 8px; font-size: 12px;">ğŸ¥ Kino-Modus</button>
                    <button id="rocket-abort-btn" class="btn btn-secondary" style="display: none; width: 100%; margin-top: 5px; font-size: 12px; background-color: #555;">âŒ Mission abbrechen</button>
                </div>

                <div id="visibility-controls">
                    <label class="checkbox-label" style="margin-top: 15px;">
                        <input type="checkbox" id="orbit-checkbox" checked>
                        Erd-/Mondbahn anzeigen
                    </label>
                    <label class="checkbox-label" style="margin-top: 10px;">
                        <input type="checkbox" id="equator-checkbox">
                        Ã„quatorlinie anzeigen
                    </label>
                    <div style="display: flex; gap: 15px; margin-top: 10px;">
                        <label class="checkbox-label" style="flex: 1;">
                            <input type="checkbox" id="planets-visible-checkbox" checked>
                            Planeten
                        </label>
                        <label class="checkbox-label" style="flex: 1;">
                            <input type="checkbox" id="planets-orbit-checkbox" checked>
                            Bahnen
                        </label>
                    </div>
                    <label class="checkbox-label" style="margin-top: 10px;">
                        <input type="checkbox" id="asteroids-checkbox">
                        AsteroidengÃ¼rtel
                    </label>
                    
                    <label class="checkbox-label" style="margin-top: 10px; padding-top: 10px; border-top: 1px dashed #444;">
                        <input type="checkbox" id="human-objects-checkbox">
                        Menschl. Objekte anzeigen (ISS)
                    </label>
                    <div id="human-objects-focus-buttons" class="btn-group" style="display: none; margin-top: 10px; padding-top: 10px; border-top: 1px dashed #555;">
                    </div>
                </div> 
                
                
            <div class="control-group">
                <h3>Kamera-Fokus</h3>
                <div class="btn-group">
                    <button id="focus-system" class="btn btn-focus">Sonnensystem</button>
                    <button id="focus-earth" class="btn btn-focus">Erde</button>
                    <button id="focus-moon" class="btn btn-focus">Mond</button>
                    <button id="focus-ecliptic" class="btn btn-focus">Ekliptik-Sicht</button>
                </div>
                <label class="checkbox-label" style="margin-top: 12px; padding-top: 10px; border-top: 1px dashed #444;">
                        <input type="checkbox" id="ecliptic-plane-checkbox">
                        Ekliptik-FlÃ¤chen (Erde/Mond) anzeigen
                    </label>
                <div id="planet-focus-buttons" class="btn-group" style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #444; display: none;">
                </div>
                <div id="moon-focus-container">
                </div>
            </div>

            <div class="control-group">
                <h3>Ereignisse & Extras</h3>
                <div class="btn-group" id="demo-buttons">
                    <button id="demo-freq" class="btn btn-info">Sonnenfinsternis HÃ¤ufigkeit</button>
                    <button id="demo-sofi" class="btn btn-warning">Sonnenfinsternisschatten</button>
                    <button id="demo-mofi" class="btn btn-warning">Mondfinsternisschatten</button>
                </div>
                
                <div id="freq-demo-controls" class="control-group" style="display: none; margin-bottom: 0; padding-top: 10px; border-top: 1px dashed #555; margin-top: 10px;">
                    <label class="checkbox-label" style="margin-top: 0;">
                        <input type="checkbox" id="real-ratio-checkbox">
                        Reale GrÃ¶ssenverhÃ¤ltnisse
                    </label>
                </div>
                
                <div class="btn-group" id="demo-control-buttons" style="display: none; margin-top: 10px;">
                    <button id="end-demo-btn" class="btn btn-danger">Demo beenden</button>
                </div>
                
                <div id="demo-speed-control">
                     <label for="demo-speed-slider" style="margin-top: 10px;">Demo-Geschw.: <span id="demo-speed-label">1.0</span>x</label>
                     <input type="range" id="demo-speed-slider" min="0" max="100" value="50" step="1">
                </div>
                
                <div id="info-box">Mondphase: mond</div>
            </div>

            <div class="control-group" id="moon-phases-group">
                <h3>Mondphasen</h3>
                <div id="moon-phases-ui">
                    <button id="phase-0" data-phase-index="0" class="moon-phase-btn" title="mond">ğŸŒ‘</button>
                    <button id="phase-1" data-phase-index="1" class="moon-phase-btn" title="Zunehmende Sichel">ğŸŒ’</button>
                    <button id="phase-2" data-phase-index="2" class="moon-phase-btn" title="Zunehmender Halbmond">ğŸŒ“</button>
                    <button id="phase-3" data-phase-index="3" class="moon-phase-btn" title="Zunehmendes Drittel">ğŸŒ”</button>
                    <button id="phase-4" data-phase-index="4" class="moon-phase-btn" title="Vollmond">ğŸŒ•</button>
                    <button id="phase-5" data-phase-index="5" class="moon-phase-btn" title="Abnehmendes Drittel">ğŸŒ–</button>
                    <button id="phase-6" data-phase-index="6" class="moon-phase-btn" title="Abnehmender Halbmond">ğŸŒ—</button>
                    <button id="phase-7" data-phase-index="7" class="moon-phase-btn" title="Abnehmende Sichel">ğŸŒ˜</button>
                </div>
            </div>

            <div class="control-group" id="seasons-group">
                <h3>Jahreszeiten (Europa)</h3>
                <div class="btn-group">
                    <button id="season-spring" class="btn btn-spring">FrÃ¼hling</button>
                    <button id="season-summer" class="btn btn-summer">Sommer</button>
                    <button id="season-autumn" class="btn btn-autumn">Herbst</button>
                    <button id="season-winter" class="btn btn-winter">Winter</button>
                </div>
            </div>
            <div class="control-group" id="real-scale-group">
                 <div id="real-scale-controls">
                    <hr class="separator" id="real-scale-sep1" style="display: none;">

                    <button id="real-dist-btn" class="btn btn-secondary" style="width: 100%; margin-top: 5px; display: none;">
                        ğŸš€ Reale Distanz
                    </button>

                    <hr class="separator" id="real-scale-sep2" style="display: none;">
                    
                    <button id="real-scale-btn" class="btn btn-secondary" style="width: 100%;">
                        ğŸ” Reale GrÃ¶ssen
                    </button>
                </div>
                <div class="control-group" id="deep-space-controls" style="display: none; border-top: 1px solid #9900cc; margin-top: 20px; padding-top: 15px;">
                    <h3 style="color: #e0b0ff;">âš ï¸ Anomalie entdeckt</h3>
                    <p style="font-size: 12px; color: #ccc; margin-bottom: 10px;">
                        Sensoren registrieren eine massive Gravitationsquelle.
                    </p>
                    <button id="warp-btn" class="btn btn-pulse" style="width: 100%; background: #1a0033; border: 1px solid #9900cc; color: #e0b0ff; text-transform: uppercase; font-weight: bold;">
                        ğŸ•³ï¸ Zum Ereignishorizont
                    </button>
                </div>
            </div>
            
        
    </div> <div id="scroll-indicator">â–¼</div>
    
</div>
    <div id="info-popup">
        <div id="info-popup-content">
            <h2 id="popup-title">Titel</h2>
            <div id="popup-details">
                </div>
            <button id="popup-close-btn" class="btn btn-secondary">Schliessen</button>
        </div>
    </div>

    <div id="ufo-dialog">
        <h3>ğŸ›¸ Unbekanntes Flugobjekt</h3>
        <!--Dialog Bild-->
        <img id="ufo-alien-image" src="ImagesGit/Alien/Alien_Nisu.webp" alt="Alien">
        <div id="ufo-dialog-text">Bist du in der Klasse von Herrn Lehmann? Wir sind auf dem Weg zur Erde, um Herrn Maurer zu entfÃ¼hren. Er hat wichtige Informationen Ã¼ber das Universum, die wir brauchen. Weisst du wo er ist?</div>
        <div class="ufo-btn-group" id="ufo-initial-buttons">
            <button id="ufo-yes-btn" class="ufo-btn">Ja, dort lang! ğŸ‘‰</button>
            <button id="ufo-no-btn" class="ufo-btn">Keine Ahnung ğŸ¤·â€â™‚ï¸</button>
        </div>
        <div class="ufo-btn-group" id="ufo-close-group" style="display: none;">
            <button id="ufo-close-btn" class="ufo-btn">Kommunikation beenden</button>
        </div>
    </div>

    <button id="info-toast-button" class="btn btn"></button>

    <!--Launch Hud-->
    <div id="launch-hud">
        <div id="hud-icon">â±ï¸</div>
        <div id="hud-content">
            <div id="hud-title">SYSTEM CHECK</div>
            <div id="hud-sub">Warte auf Startfreigabe...</div>
        </div>
        <div id="hud-bar"></div>
    </div>

    <!-- JAVASCRIPT MODULE -->
    <script src="js/config.js"></script>
    <script src="js/shaders.js"></script>
    <script src="js/classes.js"></script>
    <script src="js/data.js"></script>
    <script src="js/functions.js"></script>
    <script src="js/main.js"></script>

</body>
</html>