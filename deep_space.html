<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interstellar Simulation - GrÃ¶ssenvergleich</title>
    
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/DRACOLoader.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

    <link rel="stylesheet" href="css/deep_space.css">
</head>
<body>

    <div id="scene-transition-overlay"></div>
    <div id="labels-container"></div>

    <div id="loading-screen">
        <p id="loading-text">Lade Deep Space...</p>
        <div id="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
    </div>

    <div id="container"></div>

    <button id="fullscreen-btn" title="Vollbild umschalten"></button>
    <button id="reload-btn" title="Simulation neu laden">
        <svg viewBox="0 0 24 24">
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
        </svg>
    </button>
    <button id="camera-mode-btn" title="Fotomodus Ã¶ffnen">
        <svg viewBox="0 0 24 24">
            <path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
            <circle cx="12" cy="13" r="3"/>
        </svg>
    </button>

    <div id="camera-overlay">
        <div class="viewfinder-border">
            <div class="viewfinder-crosshair"></div>
            <div style="position: absolute; top: 10px; left: 10px; color: rgba(255,255,255,0.7); font-family: monospace; font-size: 12px;">REC â— [RAW]</div>
            <div style="position: absolute; bottom: 10px; right: 10px; color: rgba(255,255,255,0.7); font-family: monospace; font-size: 12px;">DEEP SPACE</div>
        </div>

        <div id="camera-top-bar">
            <button id="open-gallery-btn" class="btn btn-secondary" style="position: relative; border-color: #e0b0ff;">
                ğŸ–¼ï¸ Galerie
                <span id="gallery-badge" class="badge-new" style="display: none;">0</span>
            </button>
            <button id="close-camera-btn" class="btn btn-secondary" style="border-color: #ff3300; color: #ff3300;">âŒ Beenden</button>
        </div>

        <div id="camera-controls">
            <div class="cam-slider-group">
                <label>ISO (Belichtung)</label>
                <input type="range" id="cam-iso" min="0.1" max="5.0" step="0.1" value="1.5">
            </div>
            
            <button id="shutter-btn" title="Foto aufnehmen"></button>
            
            <div class="cam-slider-group">
                <label>ğŸ”­ Teleskop-Zoom</label>
                <input type="range" id="cam-zoom" min="0" max="100" step="0.5" value="30">
            </div>
        </div>
    </div>

    <div id="camera-flash"></div>

    <div id="gallery-overlay">
        <div id="gallery-header">
            <h2 style="margin:0; color: #e0b0ff;">Deep Space Aufnahmen</h2>
            <div style="display: flex; gap: 10px;">
                <button id="delete-all-btn" class="btn btn-secondary" style="border-color: #ff3300; color: #ff3300; width: auto; min-width: 120px;">
                    ğŸ—‘ï¸ Alle lÃ¶schen
                </button>
                <button id="close-gallery-btn" class="btn btn-secondary" style="width: auto;">Schliessen</button>
            </div>
        </div>
        <div id="gallery-grid">
            <p style="color: #666; width: 100%; text-align: center; grid-column: 1/-1;">Noch keine Fotos aufgenommen.</p>
        </div>
    </div>

    <div id="lightbox-overlay">
        <span id="lightbox-close">&times;</span>
        <img id="lightbox-img" src="">
    </div>

    <div id="ui-container">
        <button id="toggle-ui">âœ•</button>
        <div id="ui-scrollable-content">
            <div class="control-group">
                <h3>Navigation</h3>
                <button id="view-galaxy" class="btn btn-focus active" style="border-color: #e0b0ff;">ğŸŒŒ Gesamtansicht Galaxie</button>
                <button id="toggle-comparison" class="btn btn-secondary" style="border-color: #4fddff; margin-top: 5px;">ğŸ“ GrÃ¶ssenvergleich</button>
            </div>
            
            <div class="control-group">
                <h3>Objekte & Sternentypen</h3>
                <div id="star-buttons"></div>
            </div>

            <!-- GelÃ¶scht: Globale Simulation & Speed Slider -->

            <div id="info-box" style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 6px; font-size: 13px; text-align: center; margin-top: 10px;">
                Ansicht: Milchstrasse
            </div>
            <div class="control-group" style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px; border-bottom: none;">
                <button id="back-to-solar" class="btn btn-secondary" style="border-color: #aaa; width: 100%; color: #ffcc00;">
                    â˜€ï¸ ZurÃ¼ck zum Sonnensystem
                </button>
            </div>
        </div>
    </div>

    <div id="movable-controls">
        <div id="common-controls-content">
            <div id="spin-control-container" class="control-row">
                <label style="font-size: 12px; display: block; margin-bottom: 5px; color: #4fddff;">â­ Stern-Eigendrehung</label>
                <input type="range" id="star-spin-slider" min="0" max="2" step="0.1" value="1.0" style="width: 100%;">
            </div>

            <div id="brightness-control-container" class="control-row">
                <label style="font-size: 12px; display: block; margin-bottom: 5px; color: #ffaa00;">
                    ğŸ”¥ Leuchtkraft <span id="brightness-display" class="slider-val">1.00</span>
                </label>
                <input type="range" id="shader-brightness-slider" min="0" max="100" step="1" value="100" style="width: 100%;">
            </div>
        </div>
        
        <div id="bh-specific-content" class="control-row">
            <label style="display:flex;align-items:center;margin-bottom:5px;cursor:pointer;font-size:12px;color:#ddd;">
                <input type="checkbox" id="cb-disk-visible" checked style="margin-right:8px;accent-color:#ff8822;"> Akkretionsscheibe
            </label>
            <label style="display:flex;align-items:center;cursor:pointer;font-size:12px;color:#ddd; margin-bottom: 10px;">
                <input type="checkbox" id="cb-blue-mode" style="margin-right:8px;accent-color:#4fddff;"> Blauer Modus (Sci-Fi)
            </label>
            <label style="display:flex;align-items:center;margin-bottom:5px;cursor:pointer;font-size:12px;color:#ddd;">
                <input type="checkbox" id="cb-fov-cinematic" checked style="margin-right:8px;accent-color:#ff00ff;"> ğŸ”­ Teleskopsicht
            </label>
            
            <button id="focus-endurance" class="btn btn-secondary" style="border-color: #aaa; font-size: 12px; margin-top: 5px; display:none;">
                ğŸ›°ï¸ Fokus: Endurance
            </button>
            <label style="display:none;align-items:center;cursor:pointer;font-size:12px;color:#00ff00; margin-top:10px; border-top:1px solid #333; padding-top:5px;">
                <input type="checkbox" id="cb-debug-mode" style="margin-right:8px;accent-color:#00ff00;"> ğŸ› ï¸ Debug / Positionieren
            </label>
        </div>

        <div id="ns-specific-content" class="control-row">
            <label style="display:flex;align-items:center;cursor:pointer;font-size:12px;color:#ddd;">
                <input type="checkbox" id="cb-jets-visible" checked style="margin-right:8px;accent-color:#00ffff;"> Jets aktivieren
            </label>
        </div>
    </div>

    <div id="info-popup">
        <h2 id="popup-title">Titel</h2>
        <div id="popup-details"></div>
        <button id="popup-close" class="btn btn-secondary" style="margin-top: 15px;">Schliessen</button>
    </div>
    <button id="info-toast-button"></button>

    <div id="debug-panel" style="display:none; position:fixed; top:10px; right:50px; width:250px; background:rgba(0,0,0,0.9); border:1px solid #00ff00; padding:15px; border-radius:8px; z-index:1001; font-family:monospace;">
        <h3 style="margin:0 0 10px 0; color:#00ff00; font-size:14px;">ğŸ› ï¸ Positionier-Hilfe</h3>
        <div style="margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:10px;">
            <strong style="color:#2255ff">Millers Planet</strong>
            <div class="debug-row">X: <input type="range" id="dbg-p-x"><span id="val-p-x"></span></div>
            <div class="debug-row">Y: <input type="range" id="dbg-p-y"><span id="val-p-y"></span></div>
            <div class="debug-row">Z: <input type="range" id="dbg-p-z"><span id="val-p-z"></span></div>
        </div>
        <div style="margin-bottom:15px;">
            <strong style="color:#aaa">Endurance</strong>
            <div class="debug-row">X: <input type="range" id="dbg-e-x"><span id="val-e-x"></span></div>
            <div class="debug-row">Y: <input type="range" id="dbg-e-y"><span id="val-e-y"></span></div>
            <div class="debug-row">Z: <input type="range" id="dbg-e-z"><span id="val-e-z"></span></div>
        </div>
        <button id="btn-print-coords" style="width:100%; background:#004400; color:#00ff00; border:1px solid #00ff00; padding:5px; cursor:pointer;">ğŸ’¾ Werte in Konsole (F12)</button>
        <div style="font-size:10px; color:#888; margin-top:5px;">Rot=X, GrÃ¼n=Y, Blau=Z</div>
    </div>

    <script src="js/deep_space.js"></script>
</body>
</html>